let input = require('readline-sync');
let userInput = ''
// Code your transform function here:
function transform(object){
  let newScoreKey = {};
      for (score in object){
     letters = object[score]

      for(i=0;i<letters.length;i++){
        newScoreKey[letters[i].toLowerCase()] = Number(score) 

        }
   }
    return newScoreKey;
}

// Code your initialPrompt function here:
const initialPrompt = prompt => {
let functionUserInput = input.question(`Welcome to the Scrabble score calculator! 

Which scoring algorithm would you like to use?

0 - Scrabble: The traditional scoring algorithm.
1 - Simple Score: Each letter is worth 1 point.
2 - Bonus Vowels: Vowels are worth 3 pts, and consonants are 1 pt.

'Enter 0, 1, or 2: `)
return userInput = functionUserInput;
}




// Code your runProgram function here:
const runProgram = () => {
 initialPrompt();
 if (userInput === '0') {
    console.log('');
    console.log('Using algorithm: Scrabble');
    console.log('');
    let userWord = input.question("Enter a word to be scored, or 'Stop' to quit: ");
    console.log(`Score for '${userWord}': ${scoringAlgorithms[0].scoreFunction(userWord, newScoreKey)}`);
   } else if (userInput === '1') {
    console.log('');
    console.log('Using algorithm: Simple Score');
    console.log('');
    let userWord = input.question("Enter a word to be scored, or 'Stop' to quit: ");
    console.log(`Score for '${userWord}': ${scoringAlgorithms[1].scoreFunction(userWord)}`);
   } else if (userInput === '2') {
    console.log('');
    console.log('Using algorithm: Bonus Vowels');
    console.log('');
    let userWord = input.question("Enter a word to be scored, or 'Stop' to quit: ");
    console.log(`Score for '${userWord}': ${scoringAlgorithms[2].scoreFunction(userWord)}`)
   } else {
    console.log('');
    console.log('Please select a valid number.');
    console.log('');
    console.log('');
    initialPrompt();
   }
   
}
  // Here is the oldScoreKey object:
const oldScoreKey = {
   1: ['A', 'E', 'I', 'O', 'U', 'L', 'N', 'R', 'S', 'T'],
   2: ['D', 'G'],
   3: ['B', 'C', 'M', 'P'],
   4: ['F', 'H', 'V', 'W', 'Y'],
   5: ['K'],
   8: ['J', 'X'],
   10: ['Q', 'Z']
};

// Use the transform function to create the newScoreKey object here:
const newScoreKey = transform(oldScoreKey);


// Create your scoringAlgorithms array here:
const simpleScore = function(word) {
  return word.length;
}

const bonusVowels = function(word) {
  let vowels = ['a', 'e', 'i', 'o', 'u'];
  let points = 0
  
  for (i = 0; i < word.length; i++) {
      if (vowels.includes(word[i].toLowerCase())) {
        points = points + 3;
      } else {
        points = points + 1;
      };
    };
    return points;
};
 
const scrabbleScore = function(word, newScoreKey) {
  const counter = (accumulator, currentValue) => accumulator + currentValue;
  let points = 0;
  let newArr = [];
      for (i = 0; i < word.length; i++) {
        newArr.push(newScoreKey[word[i].toLowerCase()]);
     }
     return points = newArr.reduce(counter);
}

let scrabbleScoreObj = {name: 'Scrabble', description: 'The traditional scoring algorithm.', scoreFunction: scrabbleScore}
let bonusVowelsObj = {name: 'Simple Score', description: 'Each letter is worth 1 point.', scoreFunction: bonusVowels}
let simpleScoreObj = {name: 'Bonus Vowels', description: 'Vowels are 3 pts, consonants are 1 pt.', scoreFunction: simpleScore}

let scoringAlgorithms = [scrabbleScoreObj, simpleScoreObj, bonusVowelsObj];

// Call the runProgram function here:

runProgram()
